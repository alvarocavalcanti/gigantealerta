<style type="text/css">
  #menu {
    position: absolute;
    width: 100%;
    left: 0px;
    bottom: 0px;
  }

  #menu-toggle {
    position: relative;
    z-index: 3;
  }

  #menu-handle-icon {
    position: relative;
    z-index: 4;
    height: 80px;
  }

  #menu-items {
    position: relative;
    z-index: 4;
  }

  .menuitem {
    height: 80px;
  }

  .expanded {
  }

  .collapsed {
  }
</style>

<div id="menu" class="text-center collapsed">
  <%= image_tag "/assets/btn_button_alert_main_normal.png", {id: "menu-handle-icon"} %>
  <div id="menu-items" class="text-center">
    <%= image_tag "/assets/btn_alert_meetingpoint_normal.png", {class: "menuitem", id: "btn-encontro"} %>
    <%= image_tag "/assets/btn_alert_police_normal.png", {class: "menuitem", id: "btn-policia"} %>
    <%= image_tag "/assets/btn_alert_conflict_normal.png", {class: "menuitem", id: "btn-conflito"} %>
    <%= image_tag "/assets/btn_alert_depredation_normal.png", {class: "menuitem", id: "btn-depedracao"} %>
  </div>
</div>
<div id="loading" class="loading">Loading Map...</div>
<div id="map_canvas" class="map"/>

<script type="text/javascript">

  // -- Declarations
  
  // -- Static calls
  $('#menu-items').hide();

  // -- Declarations
  function expandMenu() {
    $('#menu').removeClass('collapsed');
    $('#menu').addClass('expanded');

    $('#menu-handle-icon').attr('src', '/assets/btn_button_alert_main_pressed.png');

    $('#menu-items').show();
  }

  function collapseMenu() {
    $('#menu').removeClass('expanded');
    $('#menu').addClass('collapsed');

    $('#menu-handle-icon').attr('src', '/assets/btn_button_alert_main_normal.png');

    $('#menu-items').hide();
  }

  function buttonClicked(btnType) {

  }

  function arrangeMenuItems() {
    var togglePos = $('#menu-handle-icon').offset();
    var toggleTop = togglePos.top;
    var toggleLeft = togglePos.left;
    var menuItemWidth = 76;
    var menuItemHeight = 77;

    // handle = top -4, width 68px

    $('#btn-encontro').css({
      top: toggleTop+ 'px',
      left: Math.round(toggleLeft - menuItemWidth) + 'px'
    });

    $('#btn-policia').css({
      top: Math.round(toggleTop - (menuItemHeight / 2)) + 'px', // 496
      left: Math.round(toggleLeft - (menuItemWidth / 2)) + 'px' // 117
    });

    // $('#btn-conflito').css({
    //   position: 'absolute',
    //   top: (togglePos.top - ($('#btn-conflito').height() * 2) ) + 'px',
    //   left: togglePos.left - ($('#btn-conflito').outerWidth() * 0.5) + 'px'
    // });
    // $('#btn-depedracao').css({
    //   position: 'absolute',
    //   top: (togglePos.top - $('#btn-depedracao').height()) + 'px',
    //   left: togglePos.left + $('#btn-depedracao').outerWidth() + 'px'
    // });
  }
  
  // -- Callbacks
  $('#menu-handle-icon').on({
    click: function () {
      if ($('#menu').hasClass('collapsed')) {
        expandMenu();
      } else {
        collapseMenu();
      }
    }
  });

  $('#btn-depedracao').on({
    click: function () {
      buttonClicked('Depedração');
    }
  });

  $('#btn-policia').on({
    click: function () {
      buttonClicked('Polícia');
    }
  });

  $('#btn-encontro').on({
    click: function () {
      buttonClicked('Encontro');
    }
  });

  $('#btn-conflito').on({
    click: function () {
      buttonClicked('Conflito');
    }
  });
</script>